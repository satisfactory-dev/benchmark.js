<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Benchmark.js Test Suite</title>
    <link rel="stylesheet" href="../node_modules/qunit/qunit/qunit.css">
  </head>
  <body>
    <div id="qunit"></div>
    <script src="../node_modules/qunit/qunit/qunit.js"></script>
    <script type="module">
      import Benchmark from '../benchmark.js';
      QUnit.config.hidepassed = true;
      globalThis.Benchmark = Benchmark;

      async function loading () {
        /** @type {string[]} */
        const scripts_to_load = ['test.js'];

        for (const url of scripts_to_load) {
          const script = document.createElement('script');
          script.src = url;

          await new Promise((yup, nope) => {
            script.onload = () => yup();
            script.onerror = (...args) => nope(args);
            document.body.append(script);
          });
        }

        console.log('done async loading');
      }

      var benchmarkModule;

        QUnit.config.autostart = false;
        await loading();
            QUnit.start();
            QUnit.on('runEnd', () => {
                console.log('Finished running tests')
            })
    </script>
  </body>
</html>
